<html>
<title>新北市停車位在那兒?</title>
<head>
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=big5">
<meta http-equiv="refresh" content="180" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
<script>
	  var now_year="";
	  var now_month="";
	  var now_date="";
	  var count =0;
	  var config = {
		  apiKey: "AIzaSyBp60Atzfhbbhlo0wzJ0dZxsoahbwQkghw",
          	  authDomain: "taipeiparking-667e9.firebaseapp.com",
                  databaseURL: "https://taipeiparking-667e9.firebaseio.com",
                  storageBucket: "taipeiparking-667e9.appspot.com",
	  };
	  firebase.initializeApp(config);
	function showlocation(value)
	{
		  console.log("value="+value);
		  $("#parkspace tbody").remove();
		  var empty="<tbody></tbody>";
		  $(empty).appendTo("#parkspace");
		  var tblRow1 ="";
		  count =0;
		 var db = firebase.database();			 
		 var i=0;
		 for (i = 0; i < 804; i++) { 
			var ref = db.ref("/"+i+"/");
			ref.on("value", function(snapshot) {
			    if(snapshot.val().AREA == value && snapshot.val().TYPE == 1)
				{
					console.log("snapshot.val().AVAILABLECAR="+snapshot.val().AVAILABLECAR);
					tblRow1 ="<tr>" + 
					"<td>" + snapshot.val().ID + "</td>" + 
					"<td>" + snapshot.val().AREA + "</td>" +
					"<td>" + snapshot.val().NAME + "</td>" +	
					"<td>" + snapshot.val().AVAILABLECAR + "</td>" + 																		
					"<td>" + snapshot.val().SUMMARY + "</td>" +
					"<td>" + snapshot.val().ADDRESS + "</td>" +	
					"<td>" + snapshot.val().TEL + "</td>" + 
					"<td>" + snapshot.val().PAYEX + "</td>" +
					"<td>" + snapshot.val().SERVICETIME + "</td>" +			
					"<td>" + snapshot.val().TW97X + "</td>" + 
					"<td>" + snapshot.val().TW97Y + "</td>" +
					"<td>" + snapshot.val().TOTALCAR + "</td>" +	
					"<td>" + snapshot.val().TOTALMOTOR + "</td>" + 
					"<td>" + snapshot.val().TOTALBIKE + "</td>" +									
					"</tr>";
					$(tblRow1).appendTo("#parkspace tbody");
				}
						  
			});
		}

	}
	
	function ShowTime(){
	　var NowDate=new Date();
	  var year = NowDate.getFullYear();
	  var month = NowDate.getMonth()+1;
	  var date = NowDate.getDate();
	　var hours=NowDate.getHours();
	  now_year=year;
	  now_month=month;
	  now_date=date;
	　var minutes=NowDate.getMinutes();
	　var seconds=NowDate.getSeconds();　
	　document.getElementById('showbox').innerHTML = '現在時間:'+year+'年'+month+'月'+date+'日'+hours+'時'+minutes+'分'+seconds+'秒';
	　setTimeout('ShowTime()',1000);
	}
</script>
</head>
<body onload="ShowTime()">
<div class="wrapper">
<div class="profile">
  <div id="showbox"></div>
  <br>
  <table border="0">
	  <tr>
			<table id= "parkspace" border="2">
				<thead>
						<th>停車場的編號</th>
						<th>行政區</th>
						<th>停車場名稱</th>
						<th>剩餘車位數</th>
						<th>車場概況</th>
						<th>停車場地址</th>
						<th>停車場電話</th>
						<th>停車場收費資訊</th>
						<th>開放時間</th>
						<th>X座標值</th>
						<th>Y座標值</th>
						<th>停車場（汽車）總車位數</th>
						<th>停車場（機車）總格位數</th>
						<th>停車場（腳踏車）總車架數</th>
				</thead>
				<tbody>
				</tbody>
			</table>
			<br>
	  </tr>
	  <!--
	  <font size="4" color="#FF0000">
		<p id="p1" style="display:none">你選的區域沒有垃圾車在街上跑</p>
	  </font>
	  -->
	  <tr>
	        <table border="0">
			<tr>
				<th>
					<button type="button" value="八里區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">八里區</button>
				</th>
				<th>
					<button type="button" value="三芝區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">三芝區</button>
				</th>
				<th>
					<button type="button" value="三重區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">三重區</button>
				</th>
				<th>
					<button type="button" value="三峽區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">三峽區</button>
				</th>
				<th>
					<button type="button" value="土城區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">土城區</button>
				</th>
				<th>
					<button type="button" value="中和區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">中和區</button>
				</th>
			</tr>
			<tr>
				<th>
					<button type="button" value="五股區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">五股區</button>
				</th>
				<th>
					<button type="button" value="平溪區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">平溪區</button>
				</th>
				<th>
					<button type="button" value="永和區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">永和區</button>
				</th>
				<th>
					<button type="button" value="石門區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">石門區</button>
				</th>
				<th>
					<button type="button" value="石碇區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">石碇區</button>
				</th>
				<th>
					<button type="button" value="汐止區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">汐止區</button>
				</th>
			</tr>
			<tr>
				<th>
					<button type="button" value="坪林區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">坪林區</button>
				</th>
				<th>
					<button type="button" value="林口區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">林口區</button>
				</th>
				<th>
					<button type="button" value="板橋區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">板橋區</button>
				</th>
				<th>
					<button type="button" value="金山區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">金山區</button>
				</th>
				<th>
					<button type="button" value="泰山區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">泰山區</button>
				</th>
				<th>
					<button type="button" value="烏來區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">烏來區</button>
				</th>
			</tr>
			<tr>
				<th>
					<button type="button" value="貢寮區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">貢寮區</button>
				</th>
				<th>
					<button type="button" value="淡水區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">淡水區</button>
				</th>
				<th>
					<button type="button" value="深坑區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">深坑區</button>
				</th>
				<th>
					<button type="button" value="新店區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">新店區</button>
				</th>
				<th>
					<button type="button" value="新莊區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">新莊區</button>
				</th>
				<th>
					<button type="button" value="瑞芳區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">瑞芳區</button>
				</th>
			</tr>
			<tr>
				<th>
					<button type="button" value="萬里區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">萬里區</button>
				</th>
				<th>
					<button type="button" value="樹林區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">樹林區</button>
				</th>
				<th>
					<button type="button" value="雙溪區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">雙溪區</button>
				</th>
				<th>
					<button type="button" value="蘆洲區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">蘆洲區</button>
				</th>
				<th>
					<button type="button" value="鶯歌區" onclick="showlocation(this.value);" style="background-color:blue;color:white;border:5px #cccccc solid;">鶯歌區</button>
				</th>
			</tr>
			</table>
	  </tr>
   </table>
</div>
</div>
</body>
</html>
